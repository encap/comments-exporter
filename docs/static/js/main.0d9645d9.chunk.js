(this["webpackJsonpcomments-exporter"]=this["webpackJsonpcomments-exporter"]||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),o=n(17),s=n.n(o),i=n(3),u=n(2),j=n.n(u),b=n(4),h=n(8),l=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),o=Object(i.a)(a,2),s=o[0],u=o[1],l=Object(c.useState)(null),d=Object(i.a)(l,2),f=d[0],O=d[1];return[function(e){u(!0),console.log(e);var t=Object(h.a)({totalLimit:100},e),n="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:3000","?").concat(new URLSearchParams(t));fetch(n).then(function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=10;break}return e.next=3,t.json();case 3:n=e.sent,console.log("fetched",n),r(n),u(!1),O(!1),e.next=12;break;case 10:throw console.warn(t.status),Error("Response not ok");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){u(!1),O(!0),console.error(e)}))},n,s,f]},d=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("h3",{children:"Export options"})})},f=n(5),O=n(22),m=n(6),p={searchOptions:{videoId:"KgqJJECQQH0",searchTerms:"nice video",verbatimMode:!0},exportOptions:{highlight:!0}},x=a.a.createContext(p),v=function(e,t){var n=t.type,r=t.payload;switch(n){case"setSearchOptions":return Object(h.a)(Object(h.a)({},e),{},{searchOptions:r});case"setExportOptions":return Object(h.a)(Object(h.a)({},e),{},{ExportOptions:r});default:throw new Error}},g=function(e){var t=e.children,n=Object(c.useReducer)(v,p),a=Object(i.a)(n,2),o=a[0],s=a[1];return Object(r.jsx)(x.Provider,{value:{state:o,setState:s},children:t})},S=x;function w(){var e=Object(f.a)(["\n  background: red;\n  color: white;\n"]);return w=function(){return e},e}function y(){var e=Object(f.a)(["\n  background: red;\n  color: white;\n  border: none;\n  border-radius: 0.5em;\n  padding: 0.2em 3em;\n  outline: none;\n  box-shadow: none;\n  appearance: none;\n  font-size: 1.2rem;\n"]);return y=function(){return e},e}var E=m.a.button(y());m.a.button(w());function k(){var e=Object(f.a)(["\n  margin: 1em 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 10em;\n  height: 10em;\n"]);return k=function(){return e},e}var C=m.a.form(k()),T=function(e){var t=e.fetchComments,n=Object(c.useContext)(S),a=n.state,o=n.setState,s=Object(O.a)({defaultValues:a.searchOptions}),i=s.register,u=s.handleSubmit;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Search options"}),Object(r.jsxs)(C,{onSubmit:u((function(e){o({type:"setSearchOptions",payload:e}),t(e)})),children:[Object(r.jsx)("input",{name:"videoId",ref:i,placeholder:"videoID"}),Object(r.jsx)("input",{name:"searchTerms",ref:i,placeholder:"Search"}),Object(r.jsxs)("label",{htmlFor:"verbatimMode",children:[Object(r.jsx)("input",{name:"verbatimMode",id:"verbatimMode",type:"checkbox",ref:i}),"Verbatim Search"]}),Object(r.jsx)(E,{type:"submit",children:"Search"})]})]})},R=function(e){var t=e.fetchComments;return Object(r.jsxs)("div",{children:[Object(r.jsx)(T,{fetchComments:t}),Object(r.jsx)(d,{})]})},_=(n(32),n(12)),A=n.n(_),L=n(13),M=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"screenshot",e.next=3,A.a.toBlob(t);case 3:r=e.sent,Object(L.saveAs)(r,"".concat(n,".png"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=n(21),I=n.n(P),N=function(e){var t=e.children,n=Object(c.useContext)(S).state,a=n.searchOptions,o=n.exportOptions,s=Object(c.useState)(),u=Object(i.a)(s,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){o.highlight?a.verbatimMode?b([a.searchTerms]):b(a.searchTerms.split(" ")):b([])}),[a.searchTerms,a.verbatimMode,o.highlight]),j?Object(r.jsx)(I.a,{textToHighlight:t,highlightStyle:{background:"#ff3",padding:"0 0.2em"},searchWords:j}):null};function z(){var e=Object(f.a)(["\n  background: none;\n  border: 1px solid white;\n  color: white;\n  padding: 0.1em 2em;\n"]);return z=function(){return e},e}function B(){var e=Object(f.a)(["\n  padding: 0.5em;\n  margin-top: 0.5em;\n  background: #181818;\n  font-size: 15px;\n"]);return B=function(){return e},e}var D=m.a.div(B()),U=m.a.button(z()),H=function(e){var t=e.comm,n=e.index,c=e.forwardRef;return Object(r.jsxs)("li",{ref:c,children:[Object(r.jsxs)(D,{className:"comment",children:[Object(r.jsx)("img",{src:t.img,alt:"profile"}),Object(r.jsxs)("b",{children:[" ",t.author]}),Object(r.jsxs)("i",{children:[" ",t.date]}),Object(r.jsx)("p",{children:Object(r.jsx)(N,{children:t.text})}),Object(r.jsxs)("h3",{children:["L: ",t.likes," R: ",t.replies]})]}),Object(r.jsx)(U,{onClick:function(){return function(e){var t=e.current.querySelector(".comment");M(t,"test-screenshot-".concat(n+1))}(c)},children:"Save"})]})};function F(){var e=Object(f.a)(["\n  color: #ccc;\n"]);return F=function(){return e},e}var J=m.a.p(F()),K=function(){return Object(r.jsx)(J,{children:"Loading..."})};function W(){var e=Object(f.a)(["\n  color: #00f;\n"]);return W=function(){return e},e}var q=m.a.p(W()),V=function(){return Object(r.jsx)(q,{children:"No comments found"})};function Q(){var e=Object(f.a)(["\n  color: #f00;\n"]);return Q=function(){return e},e}var G=m.a.p(Q()),X=function(){return Object(r.jsx)(G,{children:"Server is currently unavailable or is unable to search comments for provided ID"})},Y=function(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){e&&o(Array(e.length).fill(0).map((function(){return a.a.createRef()})))}),[e]),r},Z=function(e){var t=Object(c.useState)(e),n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(c.useContext)(S).state.searchOptions;return Object(c.useEffect)((function(){o.verbatimMode&&e.length?a(e.filter((function(e){var t=e.text;return t&&t.toLowerCase().includes(o.searchTerms.toLowerCase())}))):a(e)}),[e,o.verbatimMode,o.searchTerms]),r},$=n(23),ee=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,o=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,Promise.all(t.map(function(){var e=Object(b.a)(j.a.mark((function e(t,r){var c,a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.current.querySelector(".comment"),e.next=3,A.a.toBlob(c);case 3:return a=e.sent,e.t0=Uint8Array,e.next=7,a.arrayBuffer();case 7:return e.t1=e.sent,o=new e.t0(e.t1),e.abrupt("return",["".concat(n.imgName||"comment","-").concat(r+1,".png"),o]);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:r=e.sent,c=Object($.a)(Object.fromEntries(r)),a=new Blob([new Uint8Array(c)],{type:"application/zip"}),Object(L.saveAs)(a,"".concat(n.zipName||"screenshots",".zip"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=Object(c.useContext)(S).state.searchOptions,n=Object(c.useState)(!1),r=Object(i.a)(n,2),a=r[0],o=r[1];return Object(c.useEffect)(Object(b.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=4;break}return n.next=3,ee(e,{zipName:"".concat(t.searchTerms,"-").concat(t.videoId,"-screenshots")});case 3:o(!1);case 4:case"end":return n.stop()}}),n)}))),[a]),[a,function(){o(!0)}]},ne=function(e){var t=e.comments,n=e.isLoading,c=e.isError,a=Z(t),o=Y(a),s=te(o),u=Object(i.a)(s,2),j=u[0],b=u[1];return!0===n?Object(r.jsx)(K,{}):null===n?null:c?Object(r.jsx)(X,{}):0===t.length?Object(r.jsx)(V,{}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("h3",{children:["Found ",t.length," comment",1===t.length?"":"s"]}),Object(r.jsx)(E,{type:"button",onClick:b,children:j?"Generating...":"Save"}),Object(r.jsx)("ol",{children:a.map((function(e,t){return Object(r.jsx)(H,{forwardRef:o[t],comm:e,index:t},e.id)}))})]})},re=function(){var e=l(),t=Object(i.a)(e,4),n=t[0],c=t[1],a=t[2],o=t[3];return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h1",{children:"Comments Screenshooter"}),Object(r.jsxs)(g,{children:[Object(r.jsx)(R,{fetchComments:n}),Object(r.jsx)(ne,{comments:c,isLoading:a,isError:o})]})]})};n(35);window.React=a.a,s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(re,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.0d9645d9.chunk.js.map